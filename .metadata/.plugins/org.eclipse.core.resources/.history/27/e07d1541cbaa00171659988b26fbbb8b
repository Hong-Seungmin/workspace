package sqliteTest;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.sqlite.SQLiteConfig;

public class DBM {
	private Connection conn = null;

	// 사용 쿼리 정의
	private final String QUERY_INSERT_BY_MSG = "insert into msglog values(?,?,?);";
	private final String QUERY_SELECT_BY_ALL_MSG = "select * from msglog;";

	// 사용 디비파일 정의
	private final String DB_NAME_MSG = "logdata.db";

	public DBM() {

		try {
			Class.forName("org.sqlite.JDBC");
			conn = DriverManager.getConnection("jdbc:sqlite:" + DB_NAME_MSG);
			System.out.println("Opened database successfully(" + DB_NAME_MSG + ")");
		} catch (Exception e) {
			System.err.println(e.getClass().getName() + ": " + e.getMessage());
			System.exit(0);
		}
	}

	public void insertMSG(String msg) {

	}

	public ResultSet readDB() {
		PreparedStatement stmt = null;
		ResultSet rs=null;
		try {
			stmt = this.conn.prepareStatement(QUERY_SELECT_BY_ALL_MSG);
			rs = stmt.executeQuery();
		} catch (SQLException e) {
			e.printStackTrace();
		}
		finally{
			if(stmt!=null)
				stmt.close();
			if(rs!=null)
				
		}
		return rs;
	}
}
